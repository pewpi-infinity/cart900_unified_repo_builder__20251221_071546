<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Φ Phi Singer — SIMPLE</title>

<style>
body {
  background:#0e0e11;
  color:#f2f2f2;
  font-family:system-ui, sans-serif;
  text-align:center;
  padding:30px;
}
h1 { font-size:40px; margin-bottom:10px; }
button {
  font-size:20px;
  padding:14px 26px;
  border-radius:12px;
  border:none;
  font-weight:800;
  background:gold;
  color:black;
}
.card {
  margin-top:20px;
  background:#15151a;
  padding:18px;
  border-radius:14px;
}
label { display:block; margin-top:12px; }
input[type=range] { width:90%; }
.small { font-size:12px; opacity:.7; }
</style>
</head>

<body>

<h1>Φ Phi Singer</h1>
<p class="small">This version is intentionally dumb and loud.</p>

<button id="play">▶ PLAY</button>

<div class="card">
  <label>Tempo (ms)</label>
  <input id="tempo" type="range" min="80" max="600" value="250">
  <div class="small"><span id="tval">250</span> ms</div>

  <label>Volume</label>
  <input id="vol" type="range" min="1" max="100" value="60">
  <div class="small"><span id="vval">60</span>%</div>

  <div id="status" class="small">Ready.</div>
</div>

<script>
const phi =
"1618033988749894848204586834365638117720309179";

const scale = [
  261.63, 293.66, 329.63, 349.23, 392,
  440, 493.88, 523.25, 587.33, 659.25
];

let ctx, osc, gain;
let idx = 0;
let timer = null;

const playBtn = document.getElementById("play");
const tempo = document.getElementById("tempo");
const vol = document.getElementById("vol");
const status = document.getElementById("status");

tempo.oninput = () => tval.textContent = tempo.value;
vol.oninput = () => {
  vval.textContent = vol.value;
  if (gain) gain.gain.value = vol.value / 100;
};

playBtn.onclick = async () => {
  if (timer) return;

  // Create audio ONLY on tap
  ctx = new (window.AudioContext || window.webkitAudioContext)();
  await ctx.resume();

  gain = ctx.createGain();
  gain.gain.value = vol.value / 100;   // LOUD but controlled
  gain.connect(ctx.destination);

  osc = ctx.createOscillator();
  osc.type = "sine";
  osc.connect(gain);
  osc.start();

  status.textContent = "Playing…";

  timer = setInterval(() => {
    const d = phi.charCodeAt(idx % phi.length) - 48;
    osc.frequency.value = scale[d] || 440;
    idx++;
  }, Number(tempo.value));
};
</script>

</body>
</html>
